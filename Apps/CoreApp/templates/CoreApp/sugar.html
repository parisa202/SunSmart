{% extends "CoreApp/base.html" %}
{% load static %}

{% block extra_css %}
  <script src="https://d3js.org/d3.v6.min.js"></script>

  
  <link rel="stylesheet" href="{% static "assets/css/Profile.css" %}">
  
{% endblock extra_css %}


{% block main_content %}
  
  <style>
  </style>
</head>
<body>
  {% include "CoreApp/components/breadcrumb.html" %}
  
  <div class="entry-content editor-content" style ='justify-content: center'>
    <div style="display: flex; justify-content: center; padding-bottom: 10px;">
      <div class="container col-10">
        <h3>Insight on Australian Children Sugary Drink Consumption</h3>
        The sugar consumption among Australian Children has dropped in recent years, however, the sugar consumption</p>

        <div class="col-md-10">
          <div class="tabs-vertical">
            <ul class="nav nav-tabs nav-tabs-bg flex-column" id="tabs-7" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="tab-25-tab" data-toggle="tab" href="#tab-25" role="tab" aria-controls="tab-25" aria-selected="true">Sugary drink among boys</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab-26-tab" data-toggle="tab" href="#tab-26" role="tab" aria-controls="tab-26" aria-selected="false">Tab 2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab-27-tab" data-toggle="tab" role="tab" href="#tab-27"aria-controls="tab-27" aria-selected="false">Tab 3</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="tab-28-tab" data-toggle="tab" role="tab"href="#tab-28" aria-controls="tab-28" aria-selected="false">Tab 4</a>
                </li>
            </ul>
            <div class="tab-content tab-content-border" id="tab-content-7" >
                <div class="tab-pane fade active show" id="tab-25" role="tabpanel" aria-labelledby="tab-25-tab">
                  <div class = "row">
                    <div class="col-4">
                      <!-- Pictogram for male -->
                      <div id="chart-container-male1" ></div>
                    </div>
                    <div class="col-md-8">
                      <div class = "row">
                      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Nullam malesuada erat ut turpis.  </p>
                      </div>
                      <div class = "row">
                        <!-- Piechart for male -->
                        <div id="chart-container-male3" ></div>
                        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Nullam malesuada erat ut turpis.</p>
                        
                      </div>
                    </div><!--  col2 -->

                  </div><!-- end row for tab1 -->
                  <div class = "row"  style="justify-content: center; opacity: 0; animation: fadeIn 1s ease-in-out forwards; animation-delay: 1s;">
                    <p style = "font-size: 1rem;"">Source: National Health Survey, 2020–21 — Australia</p>
                    </div>
                </div><!-- .End .tab-pane -->
                <div class="tab-pane fade" id="tab-26" role="tabpanel" aria-labelledby="tab-26-tab">
                  <div class = "row">
                    <div class="col-md-4">
                      <div id="chart-container-female1" class="col-6"></div>
                    </div>
                    <div class="col-md-8">
                      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum int dolore earum rerum tempora aspernatur numquam velit. </p>
                    </div>  
                  </div><!-- end row for tab2 -->
                  <div class = "row"  style="justify-content: center; opacity: 0; animation: fadeIn 1s ease-in-out forwards; animation-delay: 1s;">
                    <p style = "font-size: 1rem;"">Source: National Health Survey, 2020–21 — Australia</p>
                    </div>
                </div><!-- .End .tab-pane -->
                <div class="tab-pane fade" id="tab-27" role="tabpanel" aria-labelledby="tab-27-tab">
                  <p>Perspiciatis quis nobis, adipisci quae aspernatur, nulla suscipit eum. Dolorum, earum. Consectetur pariatur repellat distinctio atque alias excepturi aspernatur nisi accusamus sed molestias ipsa numquam eius, iusto, aliquid, quis aut.</p>
                </div><!-- .End .tab-pane -->
                <div class="tab-pane fade" id="tab-28" role="tabpanel" aria-labelledby="tab-28-tab">
                  <p>Quis nobis, adipisci quae aspernatur, nulla suscipit eum. Dolorum, earum. Consectetur pariatur repellat distinctio atque alias excepturi aspernatur nisi accusamus sed molestias ipsa numquam eius, iusto, aliquid, quis aut.</p>
                </div><!-- .End .tab-pane -->
            </div><!-- End .tab-content -->
          </div><!-- End .tabs-vertical -->
        </div>

      </div> 
    </div> 


  <div class="container col-10">
    <h3>Insight on Australian Children Sugary Drink Consumption</h3>
    The sugar consumption among Australian Children has dropped in recent years, however, the sugar consumption</p>
    </div>
  </div>  


  <div class="container">
    <div class="cta bg-image pt-3 pb-3 mb-3" style="background-color:#d2efd5;background-position: center right;">
      <div class="row justify-content-center">
        <div class="col-sm-10 col-md-8 col-lg-8">
            <div class="cta-text text-center">
                <h3 class="cta-title"> Concerned about your child's health? </h3><!-- End .cta-title -->
                <p class="cta-desc"><p>Swap out sugary options for nourishing alternatives. Discover a healthier approach for your kids with our collection of healthy recipes to make snacks and smoothies. 
                </p><!-- End .cta-desc -->
                  <a href="{% url "CoreApp:recipes" %}?meal=breakfast" class="btn btn-primary btn-rounded"><span>Explore Recipes</span><i class="icon-long-arrow-right"></i></a>
              </div><!-- End .cta-text -->
          </div><!-- End .col-sm-10 col-md-8 col-lg-6 -->
      </div><!-- End .row -->
    </div>
  </div><!-- action banner .row -->
<script>
      // Sample data
      const data_boys = [
      { age: "2-3 years old", count: 0.5 },
      { age: "4-8 years old", count: 1 },
      { age: "9-11 years old", count: 2}
  ];

        // Sample data
        const data_girls = [
        { age: "2-3 years old", count: 0 },
        { age: "4-8 years old", count: 1 },
        { age: "9-11 years old", count: 1.5}
    ];

  function drawImagesTab1(data, svg_container, complete_svg, half_svg) {
    // Create SVG container
    const svg = d3.select(svg_container).append("svg")
        .attr("width", 400)
        .attr("height", 320);

    // Create groups for each age group
    const groups = svg.selectAll(".age-group")
        .data(data)
        .enter()
        .append("g")
        .attr("class", "age-group")
        .attr("transform", (d, i) => `translate(50, ${i * 100 + 40})`);

    // Append age group labels
    groups.append("text")
        .text(d => d.age)
        .attr("x", -40)
        .attr("y", 10)
        .attr("font-family", "Arial")
        .attr("font-size", "14px")
        .attr("font-weight", "bold");

    // Append SVG images for each age group
    groups.each(function(d) {
        const count = d.count;
        const integerCount = Math.floor(count);
        const fractionalCount = count - integerCount;

        // Append full images
        d3.select(this).selectAll(".full-boy")
            .data(d3.range(integerCount))
            .enter()
            .append("image")
            .attr("class", "full-boy")
            .attr("xlink:href", complete_svg)
            .attr("x", (d, i) => i * 45)
            .attr("y", 30)
            .attr("width", 40)
            .attr("height", 40)
            .attr("filter", "url(#colorFilter)");

        // Append fractional images
        if (fractionalCount > 0) {
            d3.select(this).append("image")
                .attr("xlink:href", half_svg)
                .attr("x", integerCount * 45)
                .attr("y", 30)
                .attr("width", 40)
                .attr("height", 40)
                .attr("filter", "url(#colorFilter)");
        }
    });

    // Append filter element for color change
    svg.append("defs")
        .append("filter")
        .attr("id", "colorFilter")
        .append("feColorMatrix")
        .attr("type", "matrix")
        .attr("values", "1 0 0 0 0.5  0.5 0 0 0 0.08  0 0 0 0 0  0 0 0 0.9 0"); // Adjust color values here

    // Add fade-in animation
    svg.selectAll("image")
        .style("opacity", 0) // Initially set opacity to 0
        .transition()
        .delay((d, i) => i * 400) // Delay each image's animation
        .duration(500) // Animation duration
        .style("opacity", 1); // Fade in animation
}

// first draw
drawImagesTab1(data_boys,
svg_container= "#chart-container-male1",
complete_svg = "{% static 'assets/images/svg/boy-face.svg' %}",
half_svg = "{% static 'assets/images/svg/half-boy.svg' %}");

// Call drawImages function when the user clicks on Tab 1
document.getElementById("tab-25-tab").addEventListener("click", function() {
  d3.select("#chart-container-male1").selectAll("svg").remove();
  drawImagesTab1(data_boys, svg_container= "#chart-container-male1", complete_svg = "{% static 'assets/images/svg/boy-face.svg' %}",
  half_svg = "{% static 'assets/images/svg/half-boy.svg' %}");
});

// Call drawImages function when the user clicks on Tab 1
document.getElementById("tab-26-tab").addEventListener("click", function() {
  d3.select("#chart-container-female1").selectAll("svg").remove();
  drawImagesTab1(data_girls, svg_container= "#chart-container-female1", complete_svg = "{% static 'assets/images/svg/girl-face.svg' %}",
  half_svg = "{% static 'assets/images/svg/half-girl.svg' %}");
});




//Pie charts
const data = [
{ category: "Category 1", value: 30 },
{ category: "Category 2", value: 70 }
];

const width = 900;
const height = 900;

const radius = Math.min(width, height) / 2;

// Define colors for the pie chart
const colors = d3.scaleOrdinal()
.domain(data.map(d => d.category))
.range(d3.schemeCategory10);

// Create a pie chart layout
const pie = d3.pie()
.value(d => d.value);

// Define arc for each segment of the pie chart
const arc = d3.arc()
.innerRadius(0)
.outerRadius(radius);

// Create SVG element
const svg_pie = d3.select("#chart-container-male3")
.attr("width", width)
.attr("height", height)


// Draw slices of the pie chart
const slices = svg_pie.selectAll("path")
.data(pie(data))
.enter()
.append("path")
.attr("d", arc)
.attr("fill", d => colors(d.data.category));

// Add percentage labels
slices.append("text")
.attr("transform", d => `translate(${arc.centroid(d)})`)
.attr("text-anchor", "middle")
.text(d => `${(d.endAngle - d.startAngle) / (2 * Math.PI) * 100}%`);

// Add legend
const legend = svg_pie.selectAll(".legend")
.data(data.map(d => d.category))
.enter().append("g")
.attr("class", "legend")
.attr("transform", (d, i) => `translate(-50,${i * 20})`);

legend.append("rect")
.attr("x", width - 20)
.attr("width", 18)
.attr("height", 18)
.style("fill", (d, i) => colors(i));

legend.append("text")
.attr("x", width - 26)
.attr("y", 9)
.attr("dy", ".35em")
.style("text-anchor", "end")
.text(d => d);

</script>

</body>

{% endblock main_content %}